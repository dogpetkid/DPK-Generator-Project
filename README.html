<h1 id="dpk-generator-project">DPK Generator Project</h1>
<!-- Author: Dogpetkid -->
<!-- Date: 2020-11-06 -->
<!-- Revised: 2020-11-22 -->
<style>
  body {
    background-color: #1e1e1e
  }
  *:not(a) {
    color: #d4d4d4
  }
</style>
<p>This is a project to generate levels for GTFO. For an explanation on how to use this project, see <a href="#how-to-use">How to use</a>.</p>
<p><a href="https://drive.google.com/drive/folders/1i37s30b550z84D27A6i4AsH7p4zlRGdS">Project releases.</a></p>
<h2 id="project-dependencies">Project dependencies</h2>
<ul>
<li><a href="https://numpy.org/doc/stable/">numpy</a></li>
<li><a href="https://xlrd.readthedocs.io/en/latest/">xlrd</a></li>
<li><a href="https://pandas.pydata.org/docs/">pandas</a></li>
</ul>
<h2 id="project-contents">Project contents</h2>
<ul>
<li><a href="#xlsxinterfacer">XlsxInterfacer.py</a></li>
<li><a href="#datablockio">DatablockIO.py</a></li>
<li><a href="#enumconverter">EnumConverter.py</a></li>
<li><a href="#levelutility">LevelUtility.py</a>
<ul>
<li><a href="#template">Template</a></li>
</ul></li>
</ul>
<hr />
<h2 id="xlsxinterfacer">XlsxInterfacer</h2>
<p>A module created to interface with the pandas.DataFrame and read specific typed values.</p>
<h2 id="datablockio">DatablockIO</h2>
<p>A module created to read from and write to GTFO Datablocks including search blocks based on name or persistantID.</p>
<h2 id="enumconverter">EnumConverter</h2>
<p>A module created to convert between GTFO Enumerator names and indexes.</p>
<hr />
<h2 id="levelutility">LevelUtility</h2>
<p>This is a file that is able to take a templated xlsx file and convert it into GTFO ExpeditionInTier, LevelLayout, and WardenObjective data. It takes arguments of which files to convert, converts the xlsx into dictionaries, and then writes those into the Datablocks.</p>
<h3 id="template">Template</h3>
<p><a href="https://docs.google.com/spreadsheets/d/1FLA-eHv9NhU3IdxcdQ29ueW8Qav9IlknaLdb4xbGZCI">Template is here.</a></p>
<p>Notes:</p>
<ul>
<li>The sheet tries it’s best to stop you from doing illegal or irrational things for data types (ie you can’t put a word where a number should go) but it is not idiot proof and cannot detect logical issues (eg to go into a zone with a key, it requires that key or a level doesn’t have enough cells).</li>
<li>Lots of variables have notes on them, look at the notes for more specific information about variables.</li>
<li>Most values can be left blank, if leaving a value blank could be problematic, the program will probably describe a cell as empty.</li>
<li>Some values are already filled out in the template, these are just typical values and can be changed.</li>
</ul>
<p>Below is a description of the sheets in the template:</p>
<ul>
<li>Key: A sheet describing datatypes and the version of the sheet.</li>
<li>Meta: Data for which rundown, tier, and index the level should be in.</li>
<li>ExpeditionInTier: Data about the expedition as a whole (eg population, fog, tileset) and general information about the sectors.</li>
</ul>
<p>All sheets labed LX should be duplicated per layer and renamed accordingly (eg L1, L2, L3).</p>
<ul>
<li>LX ExpeditionZoneData: List of all zones and information about them.</li>
<li><p>LX ExpeditionZoneData Lists: Different lists of items a zone can have more than one of (eg terminals, enemy spawning, etc.)</p></li>
<li>LX WardenObjective: Data about the objective, the enemy waves, objective events, etc.</li>
<li><p>LX WardenObjective ReactorWaves: Data about the Reactor objective</p></li>
</ul>
<p>Note: The program requires the Zone and Objective sheets to come as a pair (even if the second is blank). If you have L1 ExpeditionZoneData, you must have L1 ExpeditionZoneData. If you have L1 WardenObjective, you must have L1 WardenObjective.</p>
<hr />
<h2 id="how-to-use">How to use</h2>
<p>The usage of this program can be broken into a couple of steps:</p>
<ul>
<li><a href="#setup">Setup</a>
<ul>
<li>File Archiver (7-Zip)</li>
<li>Modding folder</li>
<li>Python and dependencies</li>
<li>GTFO Hack (for testing blocks easily)</li>
<li>(Unity) Asset Bundle Extractor (UABE) (for releasing blocks) &amp; Binary Encoder</li>
</ul></li>
<li><a href="#template-usage">Template Usage</a>
<ul>
<li>Level Design (crash course)</li>
<li>Meta (placement in rundown)</li>
<li>General information (ExpeditionInTier)</li>
<li>Zones (ExpeditionZoneData &amp; Lists)</li>
<li>Objectives (WardenObjective &amp; ReactorWaves)</li>
</ul></li>
<li><a href="#tool-usage">Tool Usage</a></li>
</ul>
<h3 id="setup">Setup</h3>
<h4 id="zip">7-Zip</h4>
<p>The first item needed for most of the modding is being able to extract archives. I suggest <a href="https://www.7-zip.org/">7-Zip</a>. Download the x64 (unless your computer x32).</p>
<figure>
<img src="resources/images/7-zip.png" alt="7-Zip image" /><figcaption>7-Zip image</figcaption>
</figure>
<p>After running the Installer, a context menu should be present when right clicking on .zip files (and other archives).</p>
<h4 id="modding-folder">Modding Folder</h4>
<p>Create a <code>GTFO-modding</code> folder (it’s name does not particularly matter, for clarity I will refer to it by that name). In it place this project’s folder inside of the <code>GTFO-modding</code> folder.</p>
<h5 id="original-datablocks">Original Datablocks</h5>
<p>Then download the <a href="https://discord.com/channels/734638911149703229/736410752210042950/769656076370706432">Original Datablocks</a>, move it to <code>GTFO-modding</code>, and extract the blocks (by right clicking and doing 7-Zip&gt;Extract Here). Make sure to rename the blocks folder to <code>Datablocks</code> (this is for the Level Utility to recognize it). After doing this, your <code>GTFO-modding</code> folder should look like this:</p>
<figure>
<img src="resources/images/gtfo-modding.png" alt="GTFO-modding folder image" /><figcaption>GTFO-modding folder image</figcaption>
</figure>
<h4 id="python"><a href="https://www.python.org/">Python</a></h4>
<p>Download Python <a href="https://www.python.org/downloads/">here</a> and install it (all the default settings). Open a terminal (<code>Windows+R</code> and open CMD) and run:</p>
<p><code>pip install pandas xlrd numpy</code></p>
<p>This will download all the needed dependencies for the DPK Generator Project.</p>
<h4 id="gtfo-hack">GTFO Hack</h4>
<p>Download this <a href="https://steamdb.info/app/493520/depots/">R4 Build</a> and extract it where your steam games are (normally here: <code>C:\Program Files (x86)\Steam\steamapps\common</code>). Download the <a href="https://discord.com/channels/765711589868568596/771076197525618758/771077099620270080">GTFO hack</a> and extract it inside of the <code>common\GTFO r4</code>. To swap rundowns, switch which one is named <code>GTFO</code> and rename the old one.</p>
<h4 id="unity-asset-bundle-extractoruabe"><a href="https://github.com/DerPopo/UABE">(Unity) Asset Bundle Extractor</a></h4>
<p>Download UABE <a href="https://github.com/DerPopo/UABE/releases">here</a> and extract it somewhere.</p>
<h5 id="binary-encoder">Binary Encoder</h5>
<p>Save the <a href="https://discord.com/channels/765711589868568596/769613648908910642/769823811742334987">Binary Encoder</a>. (The best place to put is probably is in your <code>GTFO-modding</code> folder. It will be used with UABE and is needed because the datablocks are serialized.)</p>
<hr />
<h3 id="template-usage">Template Usage</h3>
<p>See <a href="#template">Template</a> to see notes about the template.</p>
<h4 id="level-design-crash-course">Level Design (crash course)</h4>
<p>This section <strong>will not</strong> teach you how to make good levels but what it will do is walk you through the very general steps for creating the idea for the level and some tips.</p>
<h5 id="create-a-theme">Create a theme</h5>
<p>A level that is unique is interesting and a level that follows a single idea seems more coherent (versus being all over). A good way to do this is create something the level will focus on or a rule for the level (e.g. only use specific enemies, all alarms are the same kind, sectors unlock zones in other sectors).</p>
<h5 id="floorplan">Floorplan</h5>
<p>The next step is then creating a model of the level to help visualize the way the level works. This can be done whichever way, I prefer drawing the level in MS Paint or coloring different squares in Google Sheets. A thing to keep in mind while placing zones is which secuirty doors and <a href="#glossary">progression puzzles and chained puzzles</a> they take to open and make notes of where the key or cell will come from.</p>
<h5 id="tips">Tips</h5>
<ul>
<li>Backtracking is not fun, try to keep the amount of walking through empty rooms to a minimum.</li>
<li>A cell in one sector can open a door in another sector.</li>
<li>Try to walk through the way the level should be completed and double check if “cheesing” by skipping required zones and accidental softlocks aren’t a thing.</li>
</ul>
<hr />
<h4 id="meta">Meta</h4>
<p>This describes where in the rundown the level is placed. This is for the tool to know where in the <code>RundownDataBlock.json</code> to put the ExpeditionInTier. E.g. Rundown ID 25, TierA, Index 1 describes (R4)A2 Foster</p>
<ul>
<li>etc., describe in cell notes</li>
</ul>
<hr />
<h4 id="general-information-expeditionintier">General information (ExpeditionInTier)</h4>
<p>A level will only have 1 ExpeditionInTier sheet to be inserted into the <code>RundownDataBlock.json</code>. This describe most general information for a particular level (including some details about the layers that are not in the other sheets.)</p>
<ul>
<li><code>Enabled</code> &amp; <code>Accessiblity</code>: see notes</li>
<li><code>LevelLayoutData</code>, <code>SecondaryLayout</code>, &amp; <code>ThirdLayout</code>: An id number (1-101 are already taken by the game)</li>
<li><code>SecondaryLayerEnabled</code> &amp; <code>ThirdLayerEnabled</code>: <code>True</code> if that Layer is in the level</li>
</ul>
<h5 id="descriptive">Descriptive</h5>
<p>Name and stuff about the level.</p>
<ul>
<li><code>Prefix</code>: e.g. R3A</li>
<li><code>PublicName</code>: e.g. Bolt</li>
<li><code>ExpeditionDepth</code>: e.g. 579</li>
<li><code>EstimatedDuration</code>: A guess at the length of the level</li>
<li><code>ExpeditionDescription</code>: Flavortext (supports xml)</li>
<li><code>RoleplayedWardenIntel</code>: Flavortext (supports xml)</li>
<li><code>DevInfo</code>: A brief phrase describing the level</li>
</ul>
<h5 id="seeds">Seeds</h5>
<p>Seeds the level, self explanatory.</p>
<h5 id="specialoverridedata">SpecialOverrideData</h5>
<p>Unsure of what exactly this does. All levels set <code>WeakResourceContainerWithPackChanceForLocked</code> to -1.</p>
<h5 id="expedition">Expedition</h5>
<p>Picks settings for the entire level.</p>
<ul>
<li><code>ComplexResourceData</code>: The level tileset. (Only <code>Complex_Mining</code> and <code>Complex_Tech</code> have bulkheads.)</li>
<li><code>LightSettings</code>: Lights</li>
<li><code>FogSettings</code>: Fog level (the available setting names don’t help much <code>¯\_(ツ)_/¯</code>)</li>
<li><code>EnemyPopulation</code>: Determines the pool of enemies the groups are selected from.</li>
<li><code>ExpeditionBalance</code>: a setting with a bunch of subsettings (only <code>Normal</code> works)</li>
<li><code>ScoutWaveSettings</code>: <a href="#glossary">Wave Setting</a>, defaultly <code>Scout</code></li>
<li><code>ScoutWavePopulation</code>: <a href="#glossary">Wave Population</a>, defaulty <code>Baseline</code></li>
</ul>
<h5 id="layerdata">LayerData</h5>
<p>Only fill out for layers you have enabled.</p>
<p>This section applies for <code>MainLayerData</code>, <code>SecondaryLayerData</code>, and <code>ThirdLayerData</code>.</p>
<ul>
<li><code>ZoneAliasStart</code>: Zone 0’s Alias</li>
<li><code>ZonesWithBulkheadEntrance</code>: List of zones containing bulkheads</li>
<li><em><code>BulkheadDoorControllerPlacements</code></em>: <a href="#glossary">Placements</a> for bulkhead controllers</li>
<li><em><code>BulkheadKeyPlacements</code></em>: <a href="#glossary">Placements</a> for bulkhead keys</li>
<li><em><code>ObjectiveData</code></em>: General about the objective
<ul>
<li><code>DataBlockId</code>: an id number (1-58 are already taken by the game)</li>
<li><code>WinCondition</code>: determines whether the players extract from spawn or a forward extraction</li>
<li><em><code>ZonePlacementDatas</code></em>: <a href="#glossary">Placements</a> for objective items</li>
</ul></li>
</ul>
<hr />
<h4 id="zones-expeditionzonedata-lists">Zones (ExpeditionZoneData &amp; Lists)</h4>
<p>For every layer, a pair of <code>LX ExpeditionZoneData</code> and <code>LX ExpeditionZoneData Lists</code> sheets are needed. The <code>X</code> should be changed to whichever layer number it is (e.g. <code>L1 ExpeditionZoneData</code> for high). Every layer needs the sheets to come in pairs (even if the lists are empty). This will be inserted into <code>LevelLayoutDataBlock.json</code>. (Side note: the reason for the Lists sheet is due to having to adjust 3D and 4D data to be 2D to work with a spreadsheet.)</p>
<p>General Zone Data:</p>
<ul>
<li><code>LocalIndex</code>: Zone index</li>
<li><code>SubSeed</code>: Seed</li>
<li><code>BulkheadDCScanSeed</code>: Seed</li>
<li><code>SubComplex</code>: Narrows selected tiles</li>
<li><code>CustomGeomorph</code>: a tile that’s garunteed to be placed a.k.a. setpiece, see <a href="#reference">Reference</a></li>
<li><code>x</code>: zone length (North South)</li>
<li><code>y</code>: zone width (East West)</li>
<li><code>BuildFromLocalIndex</code>: Previous zone</li>
<li><code>StartPosition</code>: Where in the previous zone the security door for said zone should be placed.</li>
<li><code>StartPosition_IndexWeight</code>: 0 to 1 (0 to 100%) to determine where in zone for <code>StartPosition</code> set to <code>From_IndexWeight</code></li>
<li><code>StartExpansion</code>: direction for the security door entering the zone</li>
<li><code>ZoneExpansion</code>: determines which direction to continue building the zone</li>
<li><code>LightSettings</code>: Lights</li>
<li><code>AllowedZoneAltitude</code>: Height of zone</li>
<li><code>ChanceToChange</code>: 0 to 1 (0 to 100%) chance for zone to stray from set altitude (*not sure about this one)</li>
</ul>
<p>Door information:</p>
<ul>
<li><code>PuzzleType</code>: <a href="#glossary">Progression puzzle</a></li>
<li><code>CustomText</code>: Flavortext on door using <code>Locked_no_key</code> (supports xml) (default <code>&lt;color=red&gt;://ERROR: Door in emergency lockdown, unable to operate.&lt;/color&gt;</code>)</li>
<li><code>PlacementCount</code>: number of solutions to place (default 1)</li>
<li><code>ChainedPuzzleToEnter</code>: <a href="#glossary">Chained puzzle</a> (defaultly unlocked) (Common puzzles)</li>
<li><code>SecurityGateToEnter</code>: Security or Apex door</li>
<li><code>HasActiveEnemyWave</code>: Blood door?</li>
<li><code>EnemyGroupInfrontOfDoor</code>: Enemy group that spawns directly in front of door (typically <code>Hunter_easy_infront</code>)</li>
<li><code>EnemyGroupInArea</code>: Enemy group(s) that spawn in the back of the area (typically <code>Hunter_easy_inback</code>)</li>
<li><code>EnemyGroupsInArea</code>: number of “<code>EnemyGroupInArea</code>”s (defaultly 1)</li>
</ul>
<p>Decorations (and functional):</p>
<ul>
<li><code>HSUClustersInZone</code> &amp; <code>CorpseClustersInZone</code> <code>ResourceContainerClustersInZone</code> &amp; <code>GeneratorClustersInZone</code> &amp; <code>CorpsesInZone</code> &amp; <code>HSUsInZone</code> &amp; <code>DeconUnitsInZone</code>: Amount of X in zone</li>
</ul>
<p>Item spawns (and terminals):</p>
<ul>
<li><code>AllowSmallPickupsAllocation</code>: True if consumables can spawn</li>
<li><code>AllowResourceContainerAllocation</code>: True if lockers/boxes can spawn</li>
<li><code>ForceBigPickupsAllocation</code>: True if carry items / big pickups can spawn</li>
<li><code>ConsumableDistributionInZone</code>: Consumable setting</li>
<li><code>BigPickupDistributionInZone</code>: Carry item / big pickup setting</li>
<li><code>ForbidTerminalsInZone</code>: True if no terminals can spawn</li>
<li><code>HealthMulti</code> &amp; <code>WeaponAmmoMulti</code> &amp; <code>ToolAmmoMulti</code> &amp; <code>DisinfectionMulti</code>: Resource amounts (as a %, .2 is 1 use)</li>
<li><code>HealthPlacement</code> &amp; <code>WeaponAmmoPlacement</code> &amp; <code>ToolAmmoPlacement</code> &amp; <code>DisinfectionPlacement</code>: <a href="#glossary">Placement</a> weights</li>
</ul>
<h5 id="lists">Lists</h5>
<ul>
<li><em><code>EventsOnEnter</code></em>: Events that occur when a security door opens
<ul>
<li><code>DPK Identifier</code>: Describes which zone’s security door has an event</li>
<li><code>Delay</code>: Number of seconds after the door is opened that the event triggers</li>
<li><code>Enabled</code>: (*not sure about this one)</li>
<li><code>RadiusMin</code>: (*not sure about this one)</li>
<li><code>RadiusMax</code>: (*not sure about this one)</li>
<li><code>Enabled</code>: True if the door has an intel message</li>
<li><code>IntelMessage</code>: Flavortext (supports xml)</li>
<li><code>Enabled</code>: True if the door has a sound event</li>
<li><code>SoundEvent</code>: Sound event id, see <a href="#reference">Reference</a></li>
</ul></li>
<li><em><code>ProgressionPuzzleToEnter</code></em>: Describes all <a href="#glossary">Progression puzzles</a> solutions
<ul>
<li><code>DPK Identifier</code>: Describes which zone’s security door requires a puzzle</li>
<li>PuzzleType: not functional, shows puzzle type for zone, simply for ease of use <a href="#glossary">Progression puzzle</a></li>
<li><em><code>ZonePlacementData</code></em>: <a href="#glossary">Placement</a> of puzzle solution</li>
</ul></li>
<li><em><code>EnemySpawningInZone</code></em>: Describes enemy spawns
<ul>
<li><code>DPK Identifier</code>: Describes which zone the spawn data is for</li>
<li>DPK Reminder: A place to write a reminder what enemy is attempting to be selected</li>
<li><code>GroupType</code>: Enemy group type, see <a href="#reference">Reference</a></li>
<li><code>Difficulty</code>: Enemy group difficulty, see <a href="#reference">Reference</a></li>
<li><code>Distribution</code>: Determines distribution type, <code>None</code> places none, <code>Force_One</code> places 1 group, <code>Rel_Value</code> uses the distribution value to determine group size</li>
<li><code>DistributionValue</code>: group population = <code>DistributionValue</code> * zone population (zone population is 25 on <code>Normal</code> for <code>ExpeditionBalance</code>) (as a %)</li>
</ul></li>
<li><em><code>TerminalPlacements</code></em>: Defines all terminal spawns
<ul>
<li><code>DPK Identifier</code>: Describes which zone the terminal is in</li>
<li><em><code>PlacementWeights</code></em>: <a href="#glossary">Placement</a> weights</li>
<li><code>AreaSeedOffset</code>: Seed</li>
<li><code>MarkerSeedOffset</code>: Seed</li>
<li><code>DPK Group</code>: <a href="#glossary">Group</a> of logs to pull from and place onto the terminal</li>
<li><code>StartingState</code>: The state the computer spawns in (defaultly sleeping)</li>
<li><code>AudioEventEnter</code>: Audio event the terminal begins in, see <a href="#reference">Reference</a></li>
<li><code>AudioEventExit</code>: Audio event that occurs when the above audio event is exited, see <a href="#reference">Reference</a></li>
</ul></li>
<li><em><code>LocalLogFiles</code></em>: A list of log files that can be put onto terminals
<ul>
<li><code>DPK Group</code>: <a href="#glossary">Group</a> of logs that can put on terminals</li>
<li><code>FileName</code>: The name of the file</li>
<li><code>FileContent</code>: The contents of the log file (log files contents in order to be readable)</li>
<li><code>AttachedAudioFile</code>: The id of the audio log to be attached</li>
<li><code>AttachedAudioByteSize</code>: The display size of the audio log</li>
</ul></li>
<li><em><code>PowerGeneratorPlacements</code></em>: <a href="#glossary">Placement</a></li>
<li><em><code>DisinfectionStationPlacements</code></em>: <a href="#glossary">Placement</a></li>
<li><em><code>StaticSpawnDataContainers</code></em>: Defines spawns for static enemies (likes spitters and sacks)
<ul>
<li><code>DPK Identifier</code>: Describes the zone for the <a href="#glossary">Spawn Container</a></li>
<li><code>Count</code>: Number of containers</li>
<li><code>DistributionWeightType</code>: Describes whether the containers should be spread across the zone or localized near one weight (*not sure about this one)</li>
<li><code>DistributionWeight</code>: 0 to 1 (0 to 100%) to determine where in zone to localize the containers when <code>DistributionWeightType</code> is <code>Weight_is_exact_node_index</code> (*not sure about this one)</li>
<li><code>DistributionRandomBlend</code>: (*not sure about this one)</li>
<li><code>DistributionResultPow</code>: (*not sure about this one)</li>
<li><code>StaticSpawnDataId</code>: Which static enemy to assign to the container</li>
<li><code>FixedSeed</code>: Seed</li>
</ul></li>
</ul>
<hr />
<h4 id="objectives-wardenobjective-reactorwaves">Objectives (WardenObjective &amp; ReactorWaves)</h4>
<p>For every layer, a pair of <code>LX WardenObjective</code> and <code>LX ExpeditionZoneData</code> sheets are needed. The <code>X</code> should be changed to whichever layer number it is (e.g. <code>L1 WardenObjective</code> for high). Every layer needs the sheets to come in pairs (even if the Waves are empty). This will be inserted into <code>WardenObjectiveDataBlock.json</code>.</p>
<p>For objectives, fill out only information pertaining to the objective type you are using.</p>
<p>Generic Objective Data:</p>
<ul>
<li><code>Type</code>: The type of objective, see <a href="#glossary">Glossary</a></li>
<li><code>Header</code>: Display name of objective</li>
<li><code>MainObjective</code>: Objective text for level (displayed the whole time), see <a href="#reference">Reference</a></li>
<li><code>FindLocationInfo</code>: Help to find where objective is located, see <a href="#reference">Reference</a></li>
<li><code>FindLocationInfoHelp</code>: Alternate message displayed after help delay</li>
<li><code>GoToZone</code>: Help to go to the objective, see <a href="#reference">Reference</a></li>
<li><code>GoToZoneHelp</code>: Alternate message displayed after help delay</li>
<li><code>InZoneFindItem</code>: Help to find the objective in its zone, see <a href="#Reference">Reference</a></li>
<li><code>InZoneFindItemHelp</code>: Alternate message displayed after help delay</li>
<li><code>SolveItem</code>: Help to do the objective after the item is found, see <a href="#reference">Reference</a></li>
<li><code>SolveItemHelp</code>: Alternate message displayed after help delay</li>
<li><code>GoToWinCondition_Elevator</code>: Help to do the objective after the item is found, see <a href="#reference">Reference</a></li>
<li><code>GoToWinConditionHelp_Elevator</code>: Alternate message displayed after help delay</li>
<li><code>GoToWinCondition_CustomGeo</code>: Objective that displays after objective is completed and the team needs to leave at a forward extract, see <a href="#reference">Reference</a></li>
<li><code>GoToWinConditionHelp_CustomGeo</code>: Alternate message displayed after help delay</li>
<li><code>GoToWinCondition_ToMainLayer</code>: Objective that displays after objective is completed and the objective is optional, see <a href="#reference">Reference</a></li>
<li><code>GoToWinConditionHelp_ToMainLayer</code>: Alternate message displayed after help delay</li>
<li><code>ShowHelpDelay</code>: Duration of time in seconds before help variant of objective displays (default 180)</li>
<li><em><code>WavesOnElevatorLand</code></em>: <a href="#glossary">Generic Enemy Wave</a></li>
<li><em><code>WavesOnActivate</code></em>: <a href="#glossary">Generic Enemy Wave</a></li>
<li><em><code>WavesOnGotoWin</code></em>: <a href="#glossary">Generic Enemy Wave</a></li>
<li><em><code>EventsOnGotoWin</code></em>: <a href="#glossary">Warden Objective Event</a></li>
<li><code>ChainedPuzzleToActive</code>: Chained puzzle at the start of the objective (defaultly none, typically <code>HSU_Scan</code>)</li>
<li><code>ChainedPuzzleMidObjective</code>: Second chained puzzle for objective (defaultly none)</li>
<li><code>ChainedPuzzleAtExit</code>: Chained puzzle spawned at extract (defaultly none, typically <code>ExpeditionExit_Scan</code>)</li>
<li><code>ChainedPuzzleAtExitScanSpeedMultiplier</code>: speed multiplier for extract (as a %)</li>
</ul>
<p>Gather (<code>GatherSmallItems</code>):</p>
<ul>
<li><code>Gather_RequiredCount</code>: Number of Gather items required</li>
<li><code>Gather_ItemId</code>: Item to gether (can be any item? not sure)</li>
<li><code>Gather_SpawnCount</code>: Amount of Gather items that spawn</li>
<li><code>Gather_MaxPerZone</code>: Maximum Gather items that can spawn per zone</li>
</ul>
<p>Retrieve (<code>RetrieveBigItems</code>):</p>
<ul>
<li><code>Retrieve_Items</code>: List of Retrieve/Carry items needed for extract (can be any item? not sure)</li>
</ul>
<p>Reactor (<code>ReactorStartup</code> &amp; <code>Reactor_Shutdown</code>):</p>
<ul>
<li><em><code>ReactorWaves</code></em>: see <a href="#reactor-waves">Reactor Waves</a></li>
<li><code>LightsOnFromBeginning</code>: True if level lights are on before the reactor</li>
<li><code>LightsOnDuringIntro</code>: True if level lights are on duing the reactor startup sequences</li>
<li><code>LightsOnWhenStartupComplete</code>: True if level lights are on after the reactor</li>
</ul>
<p>Command (<code>SpecialTerminalCommand</code>):</p>
<ul>
<li><code>SpecialTerminalCommand</code>: Name of the special terminal command</li>
<li><code>SpecialTerminalCommandDesc</code>: Flavortext displayed when using the COMMANDS</li>
<li><code>PostCommandOutput</code>: List of outputs displayed after the command is completed</li>
</ul>
<p>Distribute (<code>PowerCellDistribution</code>):</p>
<ul>
<li><code>PowerCellsToDistribute</code>: Number of cells to distribute to generators</li>
</ul>
<p>Uplink (<code>TerminalUplink</code>):</p>
<ul>
<li><code>Uplink_NumberOfVerificationRounds</code>: Number of uplinks per terminal</li>
<li><code>Uplink_NumberOfTerminals</code>: Number of uplink terminals</li>
</ul>
<p>Cluster (<code>CentralGeneratorCluster</code>):</p>
<ul>
<li><code>CentralPowerGenClustser_NumberOfGenerators</code>: Number of generators in the cluster</li>
<li><code>CentralPowerGenClustser_NumberOfPowerCells</code>: Number of cells spawned by the objective</li>
</ul>
<p>Activate (<code>ActivateSmallHSU</code>):</p>
<ul>
<li><code>ActivateHSU_ItemFromStart</code>: HSU item at start (can be any item? not sure)</li>
<li><code>ActivateHSU_ItemAfterActivation</code>: HSU item that replaces the first after activation (can be any item? not sure)</li>
<li><code>ActivateHSU_StopEnemyWavesOnActivation</code>: Stops waves when HSU item is inserted</li>
<li><code>ActivateHSU_ObjectiveCompleteAfterInsertion</code>: True if inserting the HSU completes the objective, false if the objective is completed when the HSU is brought to extract</li>
<li><em><code>ActivateHSU_Events</code></em>: <a href="#glossary">Warden Objective Event</a></li>
</ul>
<h5 id="reactor-waves">Reactor Waves</h5>
<p>ReactorWaves:</p>
<ul>
<li><code>Wave No.</code>: Wave numbers in order (1 and up)</li>
<li><code>Warmup</code>: Time during warmup (seconds)</li>
<li><code>WarmupFail</code>: Time during warmup after failing (seconds)</li>
<li><code>Wave</code>: Time during wave (seconds)</li>
<li><code>Verify</code>: Time during verify (seconds)</li>
<li><code>VerifyFail</code>: Time during verify after failing (seocnds)</li>
<li><code>VerifyInOtherZone</code>: True if code is from a terminal, false if code is given</li>
<li><code>ZoneForVerification</code>: Zone the code is located in (several codes can be located in the same zone)</li>
</ul>
<p>EnemyWaves:</p>
<ul>
<li><code>Wave No.</code>: Reactor Wave number the Enemy Wave is for, see <a href="#glossary">Identifier</a></li>
<li><code>WaveSettings</code>: <a href="#glossary">Wave Setting</a></li>
<li><code>WavePopulation</code>: <a href="#glossary">Wave Population</a></li>
<li><code>SpawnTimeRel</code>: 0 to 1 (0 to 100%) as the amount through the wave duration the enemy wave will spawn</li>
<li><code>SpawnType</code>: Determines where the enemies spawn</li>
</ul>
<p>Events:</p>
<ul>
<li><code>Wave No.</code>: Reactor Wave number the Enemy Wave is for, see <a href="#glossary">Identifier</a></li>
<li><em><code>Events</code></em>: <a href="#glossary">Warden Objective Event</a>
<ul>
<li><code>Trigger</code>: <code>None</code> = being of Warmup, <code>OnStart</code> = beginning of Wave, <code>OnMid</code> = beginning of Verify, <code>OnEnd</code> = after Verify</li>
<li>etc., see <a href="#Glossary">Warden Objective Event</a></li>
</ul></li>
</ul>
<hr />
<h3 id="tool-usage">Tool Usage</h3>
<p>The following are the steps to use the tool.</p>
<ol type="1">
<li>Follow the <a href="#setup">Setup</a></li>
<li>Design a level</li>
<li>Create a copy of the <a href="https://docs.google.com/spreadsheets/d/1FLA-eHv9NhU3IdxcdQ29ueW8Qav9IlknaLdb4xbGZCI">Template</a> in either Google Sheets or download it as a .xlsx (to edit in Excel, Google Sheets is recommended)</li>
<li>Fill out the copy of the template.</li>
<li>Download the Google Sheets as an Excel file (.xlsx) if you didn’t in step 3</li>
<li>Drag the .xlsx onto the LevelUtility (or run the tool in CLI). Note: the only Rundown, LevelLayout, and WardenObjective datablocks are edited by the tool</li>
</ol>
<p>GTFO Hack (testing):</p>
<ol type="1">
<li>(To test with the GTFO Hack) copy the updated datablocks over to <code>common\GTFO\gtfohack\CustomDataBlocks</code> (or in a folder)</li>
<li>(To test with the GTFO Hack) after launching the game, hit ` (Grave) and type <code>LoadBlocks</code> (or if blocks are in a sub folder, <code>LoadBlocks &lt;folder&gt;</code>)</li>
</ol>
<p>UABE:</p>
<ol type="1">
<li>Use the Binary Encoder to encode all files. (All modified blocks can be dragged onto it for it to encode them.)</li>
<li>In UABE, File &gt; Open and open <code>common\GTFO\GTFO_Data\resources.assets</code></li>
<li>Select U2019.2.0f1 (should be the last one)</li>
<li>Sort the blocks in alphabetical order by clicking Name</li>
<li>To find the blocks, do View &gt; Search by name, and search "Gamedata.*" to find the blocks</li>
<li>For each modified datablock:</li>
<li>Select the block &gt; Plugins &gt; Import from .txt and select the bin encoded file</li>
<li>After all blocks are added, File &gt; Save and save it as <code>resourcesModded.assets</code> (or whatever other name, it can not save to the same name). This .assets can then replace the original and be shared easier.</li>
</ol>
<hr />
<h2 id="glossary">Glossary</h2>
<ul>
<li>Progression Puzzle: Key, Cell, or Locked status on doors</li>
<li>Chained Puzzle: A list of scans during an alarm</li>
<li>Wave Setting: Defines the size and frequency of waves</li>
<li>Wave Population: Defines the exact enemies that can spawn in a wave</li>
<li>Placement-type Data: has information about weighting and can have information about DPK Idenfier, Zone, and seeding</li>
<li>DPK Identifier/Group: A value to differentiate items in “lists of lists.” (Due to complications with storing 3D data as 2D data).
<ul>
<li>e.g. Bulkhead keys need to be placed in [zones 0] AND [zone 1 or zone 2], meaning zone 0 always has a key and the other is between zones 1 and 1. This would be represented in the sheet as “a” zone 0, “b” zone 1, “b” zone 2 so the tool knows the two “b” items are in the same sublist.</li>
<li>e.g. A Cluster requires 2 cells. These can spawn in will spawn in [zones 12 or zone 14] AND [zone 9 or zone 13], meaning one cell is in either 12 or 14 and the other is either 9 or 13. This would be represented in the sheet as “a” zone 12, “a” zone 14, “b” zone 9, “b” zone 13 so the tool knows the two “b” items are in the same sublist.</li>
</ul></li>
<li>Objective type: Non-exhaustive list of examples listed below:
<ul>
<li>HSU_FindTakeSample: R1A1, R3C1</li>
<li>Reactor_Startup: R2D2, R4D1L1</li>
<li>Reactor_Shutdown: R1D1</li>
<li>GatherSmallItems: R1B1, R2C2, R4C2L1</li>
<li>ClearAPath: R2B1, R4D2L1</li>
<li>SpecialTerminalCommand: R4A2L3, R4B2L2</li>
<li>RetrieveBigItems: R2B4, R2E1</li>
<li>PowerCellDistribution: R2B2, R4B1L1</li>
<li>TerminalUplink: R2C1, R3B1, R4C1L2</li>
<li>CentralGeneratorCluster: R2D1, R4D2L2</li>
<li>ActivateSmallHSU: R3A1, R3D1, R4C1L1</li>
</ul></li>
<li>Generic Enemy Wave: Describes an Enemy Wave (for Objectives), made of a Wave Setting, Wave Population, a spawn delay (seconds), a boolean to set the alarm noise on, and an intel message (flavortext)</li>
<li>Warden Objective Event: Describes an objective event to unlock or open a door or show an intel message, made of a Trigger (None in most cases), a type of action to a door, the layer the event is located, the zone the event is located, a delay (seconds), and intel message (flavortext)</li>
</ul>
<h2 id="reference">Reference</h2>
<p>A list of common assets, ids, and etc. which are not options provided in the list.</p>
<h3 id="geomorphs">Geomorphs</h3>
<p>All tiles can be found in <a href="../Datablocks/ComplexResourceSetDataBlock.json"><code>ComplexResourceSetDataBlock.json</code></a>. (Note: Only tiles within the selected ComplexResourceSet can be used. E.g. lab tiles can not be used in the Mining Complex.)</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Nickname</th>
<th>Tile Path</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mining exit</td>
<td>Assets/AssetPrefabs/Complex/Mining/Geomorphs/geo_64x64_mining_exit_01.prefab</td>
</tr>
<tr class="even">
<td>Tech exit</td>
<td>Assets/AssetPrefabs/Complex/Tech/Geomorphs/geo_32x32_lab_exit_01.prefab</td>
</tr>
<tr class="odd">
<td>R1C1 rector</td>
<td>Assets/AssetPrefabs/Complex/Mining/Geomorphs/geo_64x64_mining_reactor_open_HA_01.prefab</td>
</tr>
<tr class="even">
<td>R2D2 reactor</td>
<td>Assets/AssetPrefabs/Complex/Mining/Geomorphs/geo_64x64_mining_reactor_HA_02.prefab</td>
</tr>
<tr class="odd">
<td>R4B1L1 reactor</td>
<td>Assets/AssetPrefabs/Complex/Tech/Geomorphs/geo_64x64_lab_reactor_HA_01.prefab</td>
</tr>
<tr class="even">
<td>R2D2 bridge</td>
<td>Assets/AssetPrefabs/Complex/Mining/Geomorphs/Refinery/geo_64x64_mining_refinery_I_HA_01.prefab</td>
</tr>
<tr class="odd">
<td>R4D1 large room</td>
<td>Assets/AssetPrefabs/Complex/Mining/Geomorphs/Refinery/geo_64x64_mining_refinery_X_HA_02.prefab</td>
</tr>
<tr class="even">
<td>R3A1 activator room</td>
<td>Assets/AssetPrefabs/Complex/Tech/Geomorphs/geo_64x64_Lab_dead_end_room_01.prefab</td>
</tr>
<tr class="odd">
<td>R3B2 activator room</td>
<td>Assets/AssetPrefabs/Complex/Mining/Geomorphs/Refinery/geo_64x64_mining_refinery_dead_end_HA_01.prefab</td>
</tr>
<tr class="even">
<td>R3D1 activator room</td>
<td>Assets/AssetPrefabs/Complex/Tech/Geomorphs/geo_64x64_Lab_dead_end_room_02.prefab</td>
</tr>
<tr class="odd">
<td>R2D1 cluster room</td>
<td>Assets/AssetPrefabs/Complex/Mining/Geomorphs/Digsite/geo_64x64_mining_dig_site_hub_HA_01.prefab</td>
</tr>
<tr class="even">
<td>R4D2L2 cluster room</td>
<td>Assets/AssetPrefabs/Complex/Tech/Geomorphs/geo_64x64_tech_lab_hub_HA_02.prefab</td>
</tr>
<tr class="odd">
<td>R4B2L1 cluster room</td>
<td>Assets/AssetPrefabs/Complex/Mining/Geomorphs/Digsite/geo_64x64_mining_dig_site_hub_HA_02.prefab</td>
</tr>
</tbody>
</table>
<h3 id="sound-events">Sound Events</h3>
<p>All sounds can be found in <a href="resources/EVENTS.cs"><code>Wwise-ASM/AK/Events.cs</code></a>.</p>
<table>
<thead>
<tr class="header">
<th>Nickname</th>
<th>Event Name</th>
<th>Event Id</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>R3D1 Door Scream</td>
<td>BIRTHER_DISTANT_ROAR</td>
<td>3184121378</td>
</tr>
<tr class="even">
<td>R4B1 Door Knocking</td>
<td>R4_KNOCKING</td>
<td>2879789566</td>
</tr>
<tr class="odd">
<td>R3A1 Terminal Looping</td>
<td>LOG0140_CLIP_LOOP</td>
<td>2322593598</td>
</tr>
<tr class="even">
<td>R3A1 Terminal Stop Looping</td>
<td>LOG0140_CLIP_STOP</td>
<td>3945188996</td>
</tr>
</tbody>
</table>
<h3 id="enemyspawninginzone">EnemySpawningInZone</h3>
<p>All enemy groups can be found in <a href="../Datablocks/EnemyGroupDataBlock.json"><code>EnemyGroupDataBlock.json</code></a>. (Note: Populations can be checked using the <a href="https://discord.com/channels/765711589868568596/771076197525618758/771468913367318529">Population Printer</a>. This tool requires <a href="https://dotnet.microsoft.com/">.Net</a>.)</p>
<table>
<thead>
<tr class="header">
<th>Group(s) description</th>
<th>Group Type</th>
<th>Difficulty</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Sleepers (no scout)</td>
<td>Hibernate</td>
<td>Easy</td>
</tr>
<tr class="even">
<td>Sleepers (possible scout)</td>
<td>Hibernate</td>
<td>Medium</td>
</tr>
<tr class="odd">
<td>Sleepers (guaranteed scout)</td>
<td>Hibernate</td>
<td>Hard</td>
</tr>
<tr class="even">
<td>Scouts</td>
<td>PureDetect</td>
<td>Medium</td>
</tr>
<tr class="odd">
<td>Chargers/Bullrush</td>
<td>Detect</td>
<td>Easy</td>
</tr>
<tr class="even">
<td>Big Chargers</td>
<td>Detect</td>
<td>Hard</td>
</tr>
<tr class="odd">
<td>Hybrids</td>
<td>PureSneak</td>
<td>Medium</td>
</tr>
<tr class="even">
<td>Shadows</td>
<td>Hibernate</td>
<td>Biss</td>
</tr>
<tr class="odd">
<td>Big Shadows†</td>
<td>NA</td>
<td>NA</td>
</tr>
<tr class="even">
<td>Shadow Scouts</td>
<td>PureDetect</td>
<td>Boss</td>
</tr>
<tr class="odd">
<td>Birthers</td>
<td>Hibernate</td>
<td>MiniBoss</td>
</tr>
<tr class="even">
<td>Tank</td>
<td>Hibernate</td>
<td>MegaBoss</td>
</tr>
</tbody>
</table>
<p>†Removed from <code>EnemyPopulationDataBlock</code></p>
<h2 id="qa">Q&amp;A</h2>
<p>A list of common questions and answers:</p>
<ul>
<li>What if I want to have an enemy population that has two different kinds of things, do I need to create my own Enemy Population in <code>EnemyPopulationDataBlock.json</code>? For example shadow scouts and hybrids.
<ul>
<li>No. You can have several groups per zone and so you pick pre-existing groups with what you want and throw them all in the zone.</li>
</ul></li>
</ul>
<p>If you have questions please message me (and may end up on this list).</p>
<!-- links -->
